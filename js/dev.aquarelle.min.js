/*
Aquarelle, The creative & opensource CSS framework.
Copyright (C) 2012 Floris MORICEAU <floris.moriceau@komuneco.org> and Guillaume AMAT <guillaume.amat@komuneco.org>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
*/

(function(b){function a(c){if(b(c).has(":focus").length>0){b(c).addClass("child-has-focus").find(":focus").one("blur",function(){setTimeout(function(){a(c)},100)})}else{b(c).removeClass("child-has-focus")}}b(document).ready(function(){b(document).on("change",".input-file > input[type=file].real-input-file",function(){b(this).parent().find(".fake-input-file > input[type=text]").val(this.value)});b(document).on("mouseleave",".hover-dropdown-list ul, .focus-dropdown-list ul, .dropdown-top-menu ul, .dropdown-side-menu ul",function(){a(this)});b(document).on("click",".focus-dropdown-list > :button",function(){b(this).focus()});b.tipSwift.defaultCfg={delayIn:0,delayOut:0,fade:false,fallback:"",title:"title",trigger:"hover",live:true,offset:0,opacity:0.9,showEffect:b.tipSwift.effects.show,hideEffect:b.tipSwift.effects.hide,extraClass:[],html:true};b(".tooltip-n").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"n"})]});b(".tooltip-ne").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"ne"})]});b(".tooltip-e").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"e"})]});b(".tooltip-se").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"se"})]});b(".tooltip-s").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"s"})]});b(".tooltip-sw").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"sw"})]});b(".tooltip-w").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"w"})]});b(".tooltip-nw").tipSwift({plugins:[b.tipSwift.plugins.tip({gravity:"nw"})]})})})(jQuery);var i,html5_elements=["address","article","aside","audio","canvas","command","datalist","details","dialog","figure","figcaption","footer","header","hgroup","keygen","mark","meter","menu","nav","progress","ruby","section","time","video"];for(i in html5_elements){document.createElement(html5_elements[i])}i=html5_elements=undefined;(function(e){function a(g){this.element=g;this.enabled=true;this.shown=false;this.uid=0}e.extend(a.prototype,{show:function(k,h,g){if(!this.shown&&this.enabled){var j=this.getOverlay();(g||e.noop).call(j);j.find(".tipswift-inner").remove().end().append(k.addClass("tipswift-inner")).css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body).get(0).className=["tipswift"].concat(h.extraClass).join(" ");this.setPosition(h);j.addClass("tipswift-"+this.gravity);h.showEffect.call(j,h,this.gravity);this.shown=true}e(this.element).data("tipswift.instance",this.uid++)},hide:function(g){if(this.shown&&this.enabled){g.hideEffect.call(this.getOverlay(),g,this.gravity);this.shown=false}},remove:function(){this.getOverlay().remove();this.shown=false},setPosition:function(l){var g=this.getOverlay(),h=this.element,n=e.extend({},e(h).offset(),{width:h.offsetWidth,height:h.offsetHeight}),j=g[0].offsetWidth,m=g[0].offsetHeight;this.gravity=e.isFunction(l.gravity)?l.gravity.call(h):l.gravity;var k;switch(this.gravity.charAt(0)){case"n":k={top:n.top+n.height+l.offset,left:n.left+n.width/2-j/2};break;case"s":k={top:n.top-m-l.offset,left:n.left+n.width/2-j/2};break;case"e":k={top:n.top+n.height/2-m/2,left:n.left-j-l.offset};break;case"w":k={top:n.top+n.height/2-m/2,left:n.left+n.width+l.offset};break}if(this.gravity.length==2){if(this.gravity.charAt(1)=="w"){k.left=n.left+n.width/2-15}else{k.left=n.left+n.width/2-j+15}}g.css(k)},getPositionner:function(h){var j=this.uid,g=this;return function(){if(j!=e(g.element).data("tipswift.instance")){return}var k=g.getOverlay().stop(true,true);g.setPosition(h);h.showEffect.call(k,h,g.gravity);k.stop(true,true)}},getOverlay:function(){if(!this.overlay){this.overlay=e('<div class="tipswift"></div>').html('<div class="tipswift-arrow"></div>')}return this.overlay},validate:function(){if(!this.element.parentNode){this.remove();this.element=null}},focus:function(g){e(g||":input:eq(0)",this.getOverlay()).focus()},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}});e.fn.tipSwift=function(g){if(g===true){return this.data("tipswift")}else{if(typeof g=="string"){var j=this.data("tipswift");if(j){j[g]()}return this}}var h=this;g=e.extend({},e.tipSwift.defaultCfg,g);e.each(g.plugins,function(){this.init(h,g)});if(!g.live){this.each(function(){e.tipSwift.get(this,g)})}return this};e.tipSwift={get:function(j,g){var h=e.data(j,"tipswift");if(!h){h=new a(j,e.tipSwift.elementOptions(j));e.data(j,"tipswift",h);e.each(g.plugins,function(){if(e.isFunction(this.initInstance)){this.initInstance(h)}})}return h},elementOptions:function(h,g){return e.metadata?e.extend({},g,e(h).metadata()):g},gravity:{autoNS:function(){return e(this).offset().top>(e(document).scrollTop()+e(window).height()/2)?"s":"n"},autoWE:function(){return e(this).offset().left>(e(document).scrollLeft()+e(window).width()/2)?"e":"w"}},effects:{show:function(g){this.css({visibility:"visible",opacity:g.opacity})},hide:function(){this.remove()},fadeIn:function(g){this.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:g.opacity})},fadeOut:function(){this.stop().fadeOut(function(){e(this).remove()})},slideOutWE:function(g,h){this.stop().css({visibility:"visible",opacity:0}).animate({left:"+="+15*(h.indexOf("e")>-1?-1:1),opacity:g.opacity})},slideInWE:function(g,h){this.stop().animate({left:"-="+15*(h.indexOf("e")>-1?-1:1),opacity:0},function(){e(this).remove()})}},plugins:{}};e.tipSwift.defaultCfg={live:false,gravity:"n",offset:0,opacity:0.9,showEffect:e.tipSwift.effects.show,hideEffect:e.tipSwift.effects.hide,extraClass:[],html:false,plugins:[]};e.tipSwift.plugins.tip=function(g){if(!(this instanceof arguments.callee)){return new arguments.callee(g)}this.options=g||{}};e.extend(e.tipSwift.plugins.tip.prototype,{pluginCfg:{showOn:["mouseenter","focusin"],hideOn:["mouseleave","focusout"],title:"title",fallback:"",delayIn:0,delayOut:0,filterContent:e.noop},init:function(h,g){var j=this.options=e.extend({},g,this.pluginCfg,this.options);binder=j.live?"live":"bind";j.extraClass=["tip"].concat(j.extraClass.slice(0));h=e(h);this.fixTitle(h);h[binder](j.showOn.join(" "),e.proxy(this.show,this));h[binder](j.hideOn.join(" "),e.proxy(this.hide,this))},initInstance:function(g){g._tip={showTimer:null,hideTimer:null}},fixTitle:function(g){var h;g.each(function(){h=e(this);if(h.attr("title")||!h.data("tipswift.title")){h.data("tipswift.title",h.attr("title")||"").removeAttr("title")}})},show:function(j){var h=e.tipSwift.get(j.currentTarget,this.options);clearTimeout(h._tip.hideTimer);if(this.options.delayIn){this.fixTitle(e(h.element));var g=this;h._tip.showTimer=setTimeout(function(){g.doShow(h)},this.options.delayIn)}else{this.doShow(h)}},doShow:function(j){var k=this.options,g=e(j.element),h;this.fixTitle(g);if(typeof k.title=="string"){h=k.title=="title"?g.data("tipswift.title"):g.attr(k.title)}else{if(e.isFunction(k.title)){h=k.title.call(j)}}h=(""+h).replace(/(^\s*|\s*$)/,"")||k.fallback;h=e("<div>")[k.html?"html":"text"](h);j.show(h,k,function(){k.filterContent(h,j.getPositionner(k),j)})},hide:function(j){var h=e.tipSwift.get(j.currentTarget,this.options);clearTimeout(h._tip.showTimer);if(this.options.delayOut){var g=this;h._tip.hideTimer=setTimeout(function(){g.doHide(h)},this.options.delayOut)}else{this.doHide(h)}},doHide:function(g){g.hide(this.options)}});var d,b=false,c=0,f={};e.tipSwift.templates={};e.tipSwift.templates.dialog=function(j,h,n,l){var m=e('<span class="tipswift-title"></span>'),g=e('<span class="tipswift-body"></span>'),k=e('<span class="tipswift-buttons"></span>'),p;e.each(n.buttons,function(q,o){p="btn-tipswift-"+c++;k.append(e(h(q,o.label,p)));f[p]=o.action||e.noop});if(n.body){j.append(g.html(n.body))}j.append(k).prepend(m.html(n.title));return function(){n.filterContent(m,g,k,l.getPositionner(n),l)}};e.tipSwift.templates.dialogButton=function(g,h,j){return'<input type="button" id="'+j+'" name="'+g+'" value="'+h+'" />'};e.tipSwift.plugins.dialog=function(g){if(!(this instanceof arguments.callee)){return new arguments.callee(g)}this.options=g||{}};e.extend(e.tipSwift.plugins.dialog.prototype,{pluginCfg:{showOn:["click"],dialogTemplate:e.tipSwift.templates.dialog,buttonTemplate:e.tipSwift.templates.dialogButton,submitOnEnter:0,filterContent:e.noop},init:function(j,h){var k=this.options=e.extend({},h,this.pluginCfg,this.options),g=k.live?"live":"bind";k.html=true;k.extraClass=["dialog"].concat(k.extraClass.slice(0));j=e(j);j[g](k.showOn.join(" "),e.proxy(this.trigger,this))},initInstance:function(g){g._dialog={shown:false}},trigger:function(g){g.preventDefault();this.show(e.tipSwift.get(g.currentTarget,this.options))},show:function(l){if(l._dialog.shown){return}if(d){this.hide(d)}if(l.shown){l.remove()}var m=this.options,k=l.getOverlay(),h=this,j=e("<div>"),g=m.dialogTemplate(j,m.buttonTemplate,m,l);l.show(j,m,g);l.disable();l._dialog.shown=true;d=l;k.delegate("[id^=btn-tipswift-]","click",function(n){n.stopPropagation();n.target=l.element;if(f[e(this).attr("id")].call(k,n)!==false){h.hide(l)}});if(m.submitOnEnter!==false){k.delegate("input, select, button","keydown",function(n){if(n.which==13&&!/btn-tipswift/.test(e(n.currentTarget).attr("id"))){k.find("[id^=btn-tipswift-]").eq(m.submitOnEnter).click()}})}l.focus()},hide:function(g){if(g._dialog.shown){b=true;g.enable();g.hide(this.options);g._dialog.shown=false;b=false;d=null}}})})(jQuery);(function(d){function b(){var g,f;g="";for(f=1;f<24;f++){g+='<div class="span-1"><div class="span-1">'+f+'<br/><span class="column_size">'+((f*40)-10)+"px</span></div></div>"}g+='<div class="span-1 last"><div class="span-1">24<br/><span class="column_size">950px</span></div></div>';d('<div id="aquarelle_grid" class="container"></div>').appendTo("body").append(g)}function c(){if(d("#aquarelle_grid").is(":visible")){e()}else{a()}}function a(){d("#aquarelle_grid").show();d("#button_grid").addClass("button-dark").removeClass("button-light");if(window.sessionStorage){sessionStorage.setItem("aquarelle_grid_display",1)}}function e(){d("#aquarelle_grid").hide();d("#button_grid").addClass("button-light").removeClass("button-dark");if(window.sessionStorage){sessionStorage.setItem("aquarelle_grid_display",0)}}d(document).ready(function(){b();d('<div id="aquarelle_dev"><button type="button" id="button_grid" class="button-light tiny">Grid</button></div>').appendTo("body").on("click",c);if(window.sessionStorage){if(sessionStorage.getItem("aquarelle_grid_display")=="1"){a()}}})})(jQuery);